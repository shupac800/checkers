{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","javascripts/display.js","javascripts/game.js","javascripts/main.js","javascripts/player.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"bundle.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","// display.js\r\n\r\n\"use strict\";\r\n\r\nvar Game = require('./game.js');\r\n\r\nvar Display = {};\r\nvar moveObj = {};\r\n\r\nDisplay.drawBoard = function(){\r\n  var row, col;\r\n  var htmlString = \"\";\r\n  for (row = 0; row < 8; row++) {\r\n    for (col = 0; col < 8; col++) {\r\n      let squareColor = (row + col) % 2 === 0 ? \"#DDD\" : \"black\";\r\n      let player = Game.matrix[row][col];\r\n      htmlString += `<img src='img/player${player}.png' style='background-color:${squareColor}' class='row${row} col${col} p${player}'>`;\r\n    }\r\n  }\r\n  $(\"#board\").html(htmlString);\r\n};\r\n\r\nmodule.exports = Display;","\"use strict\";\r\n\r\n//let Player = require('./player.js');  // for some reason we crash if Player is required here\r\n\r\nlet Game = {\r\n  newMatrix:       [[0,2,0,2,0,2,0,2],\r\n                    [2,0,2,0,2,0,2,0],\r\n                    [0,2,0,2,0,2,0,2],\r\n                    [0,0,0,0,0,0,0,0],\r\n                    [0,0,0,0,0,0,0,0],\r\n                    [1,0,1,0,1,0,1,0],\r\n                    [0,1,0,1,0,1,0,1],\r\n                    [1,0,1,0,1,0,1,0]]\r\n};\r\n\r\nGame.doMove = function(moveObj) {\r\n  // first, validate that moveObj defines a valid move\r\n  let error = Game.validate(moveObj);\r\n  $(\"#error\").html(error);\r\n  console.log(\"indexOf OK is\",error.indexOf(\"OK\"));\r\n\r\n  if (error.indexOf(\"OK\") >= 0) {  // move is valid\r\n    // move player piece\r\n    Game.matrix[moveObj.oRow][moveObj.oCol] = 0;\r\n    Game.matrix[moveObj.dRow][moveObj.dCol] = moveObj.player;\r\n    // return with exit code = success\r\n    return 0;\r\n  }\r\n  return -1;\r\n};\r\n\r\nGame.validate = function(moveObj) {\r\n  // attempting a jump?\r\n  if ((Math.abs(moveObj.oRow - moveObj.dRow) === 2) && \r\n      (Math.abs(moveObj.oCol - moveObj.dCol) === 2) ) {\r\n    var jumpRow = (moveObj.oRow + moveObj.dRow) / 2;\r\n    var jumpCol = (moveObj.oCol + moveObj.dCol) / 2;\r\n    var otherPlayer = moveObj.player === 1 ? 2 : 1;\r\n    if (Game.matrix[jumpRow][jumpCol] === otherPlayer) {\r\n      Game.matrix[jumpRow][jumpCol] = 0;  // remove jumped piece from board\r\n      return \"jump OK!\";\r\n    } else {\r\n      return \"nothing to jump!\";\r\n    }\r\n  }\r\n  // forward move? only kings can move backward.\r\n  if (((moveObj.player === 1) && (moveObj.dRow > moveObj.oRow ) ) ||\r\n      ((moveObj.player === 2) && (moveObj.dRow < moveObj.oRow ) ) ) {\r\n    return \"can only move forward\";\r\n  }\r\n  // ordinary move?\r\n  if ((Math.abs(moveObj.oRow - moveObj.dRow) === 1) && \r\n      (Math.abs(moveObj.oCol - moveObj.dCol) === 1) ) {\r\n    return \"OK\";\r\n  }\r\n  // if move is not expressly permitted, it's forbidden\r\n  return \"unspecified error\";\r\n};\r\n\r\nmodule.exports = Game;","\"use strict\";\r\n\r\nlet Game = require('./game.js');\r\nlet Player = require('./player.js');\r\n//let Display = require('./display.js');\r\n\r\nGame.matrix = Game.newMatrix;\r\n\r\nPlayer.go();","// player.js\r\n\r\n\"use strict\";\r\n\r\nlet Game = require('./game.js');\r\nlet Display = require('./display.js');\r\n\r\nlet Player = {\r\n  whoseTurn: 1,  // player 1 goes first\r\n  assignListeners: function() {\r\n    var moveObj = {};  // re-initialize moveObj\r\n    moveObj.player = Player.whoseTurn;\r\n\r\n    $(`.p${Player.whoseTurn}`).on(\"mousedown\",function(event){  // note: dynamically-created DOM element\r\n      moveObj.oRow = parseInt(event.target.className.charAt(3));\r\n      moveObj.oCol = parseInt(event.target.className.charAt(8));\r\n      console.log(\"mousedown\",moveObj);\r\n      return false;\r\n    });\r\n\r\n    $(\".p0\").on(\"mouseup\",function(event){\r\n      moveObj.dRow = parseInt(event.target.className.charAt(3));\r\n      moveObj.dCol = parseInt(event.target.className.charAt(8));\r\n      console.log(\"mouseup\",moveObj);\r\n      let exit_code = Game.doMove(moveObj);\r\n      if (exit_code === 0) { // move was valid\r\n        Player.whoseTurn = Player.whoseTurn === 1 ? 2 : 1;  // switch players\r\n      }\r\n      Player.go();\r\n    });\r\n  },\r\n  go: function() {\r\n    Display.drawBoard();\r\n    Player.assignListeners(Player.whoseTurn);\r\n    $(\"#whoseTurn\").html(`Player ${Player.whoseTurn} go!`);\r\n  }\r\n};\r\n\r\nmodule.exports = Player;"]}